{% extends 'new_base.html' %}
{% load static %}
{% block title %}Auctions | {{ title }} {% endblock %}

{% block links %}
    <script id="cookieyes" type="text/javascript"
            src="https://cdn-cookieyes.com/client_data/df1073b472fdc497671c74e5/script.js"></script>
    <link href='{% static "css/index.css" %}' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
{% endblock %}


{% block body %}
    <div class="container">

        <section class="hero">
            {% include 'hero.html' %}
        </section>
{#     <section class="hero">#}
{#            {% include 'featured_auctions.html' %}#}
{#        </section>#}

        <section class="container desktop-only">
            <div class="text-center text-muted">
                <strong>Better On Mobile</strong>
                <p>
                    We see you are on our desktop site. Did you know you can use your mobile device to automatically create a listing
                    with our QR/Barcode code scanner?
                </p>
            </div>
        </section>

        <section class="featured-auctions container">
            {% if user.is_authenticated %}
                {% if recent_views %}
                    <div class="auctions-category mb-5">
                        <h2>
                            <a href="{% url 'active_auctions_view' %}?recent_views=1">Recently Viewed</a>
                        </h2>
                        <div class="auction-items grid">
                            {% for view in recent_views %}
                                <div class="auction-item-container">
                                    <a class="auction-item" href="{% url 'active_auctions_with_id' view.auction.id %}">
                                        {% if view.auction.get_images.first %}
                                            <img src="{{ view.auction.get_images.first.image.url }}"
                                                 alt="{{ view.auction.title }}">
                                        {% else %}
                                            <img src="{% static 'images/no_image.png' %}" alt="Default Image">
                                        {% endif %}
                                        <h3>{{ view.auction.title|truncatechars:30 }}</h3>
                                        <p>{{ view.auction.category }}</p>
                                        {% if view.auction.auction_type == 'Auction' %}
                                            <h3>
                                                {% if view.auction.current_bid %}
                                                    ${{ view.auction.current_bid }}
                                                    <div class="fs-5 fw-light fst-italic">Current Bid</div>
                                                {% else %}
                                                    ${{ view.auction.starting_bid }}
                                                    <div class="fs-5 fw-light fst-italic">Starting Bid</div>
                                                {% endif %}
                                                <div class="lead time-remaining">{{ view.auction.formatted_time_remaining }}
                                                    Remaining
                                                </div>
                                            </h3>
                                        {% else %}
                                            <h3>
                                                ${{ view.auction.buyItNowPrice }}
                                                <div class="fs-5 fw-light fst-italic">Get it Now</div>
                                            </h3>
                                        {% endif %}
                                    </a>
                                    <a class='btn btn-secondary mt-auto rounded watch-button'
                                       href="{% url 'watchlist_edit' view.auction.id 'active_auctions_with_id' %}">
                                        {% if view.is_watched %}
                                            <i class="fa-solid fa-eye-slash"></i>
                                        {% else %}
                                            <i class="fa-regular fa-eye"></i>
                                        {% endif %}
                                    </a>

                                </div>
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}
                {% if watchlist %}
                    <div class="auctions-category mb-5">
                        <h2>Your Watchlist</h2>
                        <div class="auction-items grid">

                            {% for auction in watchlist %}
                                <div class="auction-item-container">
                                    <a class="auction-item" href="{% url 'active_auctions_with_id' auction.id %}">
                                        {% if auction.image %}
                                            <img src="{{ auction.image.image.url }}" alt="{{ auction.title }}">
                                        {% else %}
                                            <img src="{% static 'images/no_image.png' %}" alt="Default Image">
                                        {% endif %}
                                        <h3>{{ auction.title|truncatechars:30 }}</h3>
                                        <p>{{ auction.category }}</p>
                                        {% if auction.auction_type == 'Auction' %}
                                            <h3>
                                                {% if view.auction.current_bid %}
                                                    ${{ auction.current_bid }}
                                                    <div class="fs-5 fw-light fst-italic">Current Bid</div>
                                                {% else %}
                                                    ${{ auction.starting_bid }}
                                                    <div class="fs-5 fw-light fst-italic">Starting Bid</div>
                                                {% endif %}
                                                <div class="lead time-remaining">{{ auction.formatted_time_remaining }}
                                                    Remaining
                                                </div>
                                            </h3>
                                        {% else %}
                                            <h3>
                                                ${{ auction.buyItNowPrice }}
                                                <div class="fs-5 fw-light fst-italic">Get it Now</div>
                                            </h3>
                                        {% endif %}
                                    </a>
                                    <a class='btn btn-secondary mt-auto rounded watch-button'
                                       href="{% url 'watchlist_edit' auction.id 'index' %}">
                                        <i class="fa-solid fa-eye-slash"></i>
                                    </a>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}
            {% endif %}

            <div class="auctions-category mb-5">
                <h2>{{ auctions_cat1_name }}</h2>
                <div class="auction-items grid">
                    {% for auction in auctions_cat1 %}
                        <div class="auction-item-container">
                            <a class="auction-item" href="{% url 'active_auctions_with_id' auction.id %}">
                                {% if auction.image %}
                                    <img src="{{ auction.image.image.url }}" alt="{{ auction.title }}">
                                {% else %}
                                    <img src="{% static 'images/no_image.png' %}" alt="Default Image">
                                {% endif %}
                                <h3>{{ auction.title|truncatechars:30 }}</h3>
                                <p>{{ auction.category }}</p>
                                {% if auction.auction_type == 'Auction' %}
                                    <h3>
                                        {% if view.auction.current_bid %}
                                            ${{ auction.current_bid }}
                                            <div class="fs-5 fw-light fst-italic">Current Bid</div>
                                        {% else %}
                                            ${{ auction.starting_bid }}
                                            <div class="fs-5 fw-light fst-italic">Starting Bid</div>
                                        {% endif %}
                                        <div class="lead time-remaining">{{ view.auction.formatted_time_remaining }}
                                            Remaining
                                        </div>
                                    </h3>
                                {% else %}
                                    <h3>
                                        ${{ auction.buyItNowPrice }}
                                        <div class="fs-5 fw-light fst-italic">Get it Now</div>

                                    </h3>
                                {% endif %}
                            </a>
                            <a class='btn btn-secondary mt-auto rounded watch-button'
                               href="{% url 'watchlist_edit' auction.id 'active_auctions_with_id' %}">
                                {% if auction.is_watched %}
                                    <i class="fa-solid fa-eye-slash"></i>
                                {% else %}
                                    <i class="fa-regular fa-eye"></i>
                                {% endif %}
                            </a>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <div class="auctions-category mb-5">
                <h2>{{ auctions_cat2_name }}</h2>
                <div class="auction-items grid">
                    {% for auction in auctions_cat2 %}
                        <div class="auction-item-container">
                            <a class="auction-item" href="{% url 'active_auctions_with_id' auction.id %}">
                                {% if auction.image %}
                                    <img src="{{ auction.image.image.url }}" alt="{{ auction.title }}">
                                {% else %}
                                    <img src="{% static 'images/no_image.png' %}" alt="Default Image">
                                {% endif %}
                                <h3>{{ auction.title|truncatechars:30 }}</h3>
                                <p>{{ auction.category }}</p>
                                {% if auction.auction_type == 'Auction' %}
                                    <h3>
                                        {% if view.auction.current_bid %}
                                            ${{ auction.current_bid }}
                                            <div class="fs-5 fw-light fst-italic">Current Bid</div>

                                        {% else %}
                                            ${{ auction.starting_bid }}
                                            <div class="fs-5 fw-light fst-italic">Starting Bid</div>
                                        {% endif %}
                                        <div class="lead time-remaining">{{ view.auction.formatted_time_remaining }}
                                            Remaining
                                        </div>
                                    </h3>
                                {% else %}
                                    <h3>
                                        ${{ auction.buyItNowPrice }}
                                        <div class="fs-5 fw-light fst-italic">Get it Now</div>
                                    </h3>
                                {% endif %}
                            </a>
                            <a class='btn btn-secondary mt-auto rounded watch-button'
                               href="{% url 'watchlist_edit' auction.id 'active_auctions_with_id' %}">
                                {% if auction.is_watched %}
                                    <i class="fa-solid fa-eye-slash"></i>
                                {% else %}
                                    <i class="fa-regular fa-eye"></i>
                                {% endif %}
                            </a>
                        </div>


                    {% endfor %}
                </div>
            </div>

        </section>

        <div class="container p-0">
            <div class="call-to-action d-flex align-items-center justify-content-center" id="footer-cta">
                <div class="content">
                    <h2 class="mb-3">Ready to Start Bidding and Shopping?</h2>
                    <p class="mb-4">Join us today to participate in exciting auctions and browse exclusive sales on
                        top-quality healthcare equipment.</p>
                    <div class="d-flex flex-column flex-md-row gap-3 justify-content-center">
                        <a href="{% url 'register' %}" class="btn btn-light btn-lg">
                            Sign Up Now <i class="fas fa-user-plus ms-2"></i>
                        </a>
                        <a href="{% url 'active_auctions_view' %}" class="btn btn-outline-light btn-lg">
                            Browse Listings <i class="fas fa-search ms-2"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>

    </div>


    <style>

    </style>
{% endblock %}



